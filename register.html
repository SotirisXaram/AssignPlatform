<!DOCTYPE html>
<html lang="el">

<script>
    function validateForm() {

        const email = document.forms["register_form"]["email"].value;
        const password = document.forms["register_form"]["password"].value;
        const confirm_password = document.forms["register_form"]["password-2"].value;
        const username = document.forms["register_form"]["username"].value;

        //  Το username πρέπει να είναι μήκους τουλ 5. 
        if(username.length < 5){
            alert("Το όνομα χρήστη πρέπει να είναι τουλάχιστον 5 χαρακτήρες.");
            return false;
        }

        //  Το email πρέπει να περιέχει το @. 
        if (!email.includes("@")) {
            alert("To email να περιέχει το @");
            return false;
        }

        // Ο κωδικός (password) θα αποτελείται από τουλάχιστον 10 χαρακτήρες
        if (password.length < 10) {
            alert("Ο κωδικός πρεπει να ειναι τουλάχιστον 10 χαρακτήρες.");
            return false;
        }
        // και να περιέχει έναν αριθμό
        const numbers = /[0-9]/g;
        if (!password.match(numbers)) {
            alert("Τουλάχιστον ένας χαρακτήρας να είναι αριθμος");
            return false;
        }
        // ένα πεζό γράμμα
        const lowerCaseLetters = /[a-z]/g;
        if (!password.match(lowerCaseLetters)) {
            alert("Τουλάχιστον ένας χαρακτηρας να είναι πεζό γραμμα");
            return false;
        }
        // ένα κεφαλαίο γράμμα
        const upperCaseLetters = /[A-Z]/g;
        if (!password.match(upperCaseLetters)) {
            alert("Τουλάχιστον ένας χαρακτήρες να είναι κεφαλαιο γράμμα");
            return false;
        }
        // ένα σύμβολο (!@#$%^&*_-).
        const symbols = /[!@#$%^&*_-]/g;
        if (!password.match(symbols)) {
            alert("Τουλάχιστον ενα χαρακτήρα από [!@#$%^&*_-]");
            return false;
        }

        if (password != confirm_password) {
            alert("Οι κωδικοί πρόσβασης δεν ταιριαζουν.");
            return false;
        }
    }
</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Μεταπτυχιακό Machine Learning</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- style.css -->
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <header class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <!-- Logo -->
            <a class="navbar-brand" href="index.php">
                <img src="img/logo.png" alt="logo" style="height: 80px;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.php">Αρχική</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="portofolio.html">Portfolio Εργασιών</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="profil.html">Προφίλ</a>
                    </li>
                </ul>
                <button class="btn btn-outline-success my-2 my-sm-0" type="button"
                    onclick="window.location.href='login.html';">Είσοδος</button>
            </div>
        </div>
    </header>

    <div class="container form-content my-5 ">
        <h1 class="text-center mb-4">Εγγραφή Χρήστη</h1><br>
        <div class="form">
            <form method="post" name="register_form" action="register.php" onsubmit="return validateForm()">
                <!-- Όνομα Χρήστη -->
                <div class="mb-4">
                    <b><label for="username" class="form-label">Όνομα Χρήστη</label></b>
                    <input name="username" type="text" class="form-control" id="username" placeholder="Πληκτρολόγησε το Όνομα Χρήστη">
                </div>

                <!-- Email -->
                <div class="mb-4">
                    <b><label for="email" class="form-label">Email</label></b>
                    <input name="email" type="email" class="form-control" id="email" placeholder="Πληκτρολόγησε το email σας">
                </div>

                <!-- Κωδικoς -->
                <div class="mb-4">
                    <b><label for="password" class="form-label">Κωδικός Πρόσβασης</label></b>
                    <input name="password" type="password" class="form-control" id="password"
                        placeholder="Πληκτρολόγησε τον Κωδικό Πρόσβασης">
                </div>

                <!-- Επιβεβαίωση Κωδικού -->
                <div class="mb-4">
                    <b><label for="password-2" class="form-label">Επιβεβαίωση Κωδικού</label></b>
                    <input type="password" class="form-control" id="password-2"
                        placeholder="Επιβεβαιώστε τον Κωδικό Πρόσβασης">
                </div>
                <!-- Role -->
                <div class="mb-4">
                    <b><label for="role" class="form-label">Ρόλος Χρήστη</label></b>
                    <select required class="form-control" name="role">
                        <option value="">Επιλέξτε ιδιότητα</option>
                        <option value="student">Φοιτητής</option>
                        <option value="professor">Καθηγητής</option>
                    </select>
                </div>

                <div class="text-left">
                    <button type="submit" class="btn btn-primary px-4">Εγγραφή</button>
                </div>
            </form>
        </div>
    </div>

    <br>
    <br>
    <br>
    <br>

    <!-- Footer.  -->
    <footer class="footer">
        <div class="container text-center">
            <a href="pdf/terms.pdf" target="_blank">Όροι χρήσης</a>&emsp;|&emsp;
            <a href="pdf/privacy.pdf" target="_blank">Πολιτική Απορρήτου</a>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script την προσθηκη της κλασσης active ετσι ωστε να ειναι highlight το επιλεγμενο -->
    <script>

        const links = document.querySelectorAll('.nav-link');

        links.forEach(link => {
            if (link.href === window.location.href) {
                link.classList.add('active');
            }
        });
    </script>
</body>

</html>